; PyCBC configuration for BNS-NSBH-BBH search on O1 data
;
; Documentation for running the workflow generator is here:
;
;    http://ligo-cbc.github.io/pycbc/releases/v1.2.0/html/workflow/pycbc_make_coinc_search_workflow.html


[workflow]
; http://ligo-cbc.github.io/pycbc/releases/v1.2.0/html/workflow/initialization.html
; file retention level can take 4 possible values
; "all_files"    for debugging the pipeline
; "all_triggers" recommended for normal running
; "merged_triggers" used to rerun with file reuse for changes that do not affect
;                single-detector trigger sets but may affect coinc results
; "results"      used to rerun with file reuse to rerun with changes to plots
file-retention-level = all_triggers

[workflow-datafind]
; http://ligo-cbc.github.io/pycbc/releases/v1.2.0/html/workflow/datafind.html
datafind-method = AT_RUNTIME_SINGLE_FRAMES

; Look for times when the segment database says that data is analyzable, but
; no frame data exists on disk. If any frame data is missing, raise an error
datafind-check-segment-gaps = raise_error

; Stat each frame that datafind returns and fail if any frames are missing
datafind-check-frames-exist = raise_error

; Check to see if there are any frames on disk that are not covered in the
; segment_summary table for science segments. 
; Functionality is not working yet with the new pipeline DQ interface,
; however it is not vital to run the pipeline correctly.
;datafind-check-segment-summary = warn

[workflow-segments]
; http://ligo-cbc.github.io/pycbc/releases/v1.2.0/html/workflow/segments.html
segments-method = ALL_SINGLE_IFO_TIME

[workflow-tmpltbank]
; See http://ligo-cbc.github.io/pycbc/releases/v1.2.0/html/workflow/template_bank.html
tmpltbank-method = PREGENERATED_BANK
; NOTE - This bank file may or may not be effectual depending on the data and its PSD
; Current bank extends to minimum duration 0.15s
tmpltbank-pregenerated-bank = /home/albert.einstein/search/banks/bank.hdf

[workflow-splittable]
; http://ligo-cbc.github.io/pycbc/releases/v1.2.0/html/workflow/splittable.html
splittable-method = IN_WORKFLOW
splittable-exe-tag = splitbank

[workflow-splittable-full_data]
splittable-num-banks = 1

[workflow-splittable-injections]
splittable-num-banks = 1

[workflow-matchedfilter]
; http://ligo-cbc.github.io/pycbc/releases/v1.2.0/html/workflow/matched_filter.html
matchedfilter-method = WORKFLOW_INDEPENDENT_IFOS
min-analysis-segments = 1
min-analysis-length = 528
max-analysis-segments = 10
output-type = hdf
plot-throughput =

[workflow-coincidence]
; http://ligo-cbc.github.io/pycbc/releases/v1.2.0/html/workflow/hdf_coincidence.html
do-trigger-fitting =

;[workflow-coincidence-full_data-2det]
[workflow-coincidence-full]
parallelization-factor = 40

;[workflow-coincidence-injections-2det]
[workflow-coincidence-inj]
parallelization-factor = 20

[workflow-psd]
parallelization-factor = 20


[workflow-psd]
parallelization-factor = 20

;[workflow-gating]
; see gating.ini

[workflow-results]
; number of levels of event hierarchical removal to perform
max-hierarchical-removal = 5

[splitbank]
; split the template bank up by chirp mass between jobs for clustering reasons
mchirp-sort =

[path]
path_full_data = /home/albert.einstein/search/coarse/output/full_data/
path_BNSINJ = /home/albert.einstein/search/coarse/output/BNSSTT2_INJ_coinc/
path_BBHINJ = /home/albert.einstein/search/coarse/output/BBHSEOBNRV4_INJ_coinc/
path_NSBHINJ = /home/albert.einstein/search/coarse/output/NSBHSEOBNRV4_INJ_coinc/

; modify GPSSTART, GPSEND (GPSSTART-GPSEND) from run.sh
stage1-full-data-trigger-files = ${path|path_full_data}H1L1-COINC_FULL_DATA_FULL_VETOES_0-GPSSTART-GPSEND.hdf ${path|path_full_data}H1L1-COINC_FULL_DATA_FULL_VETOES_1-GPSSTART-GPSEND.hdf ${path|path_full_data}H1L1-COINC_FULL_DATA_FULL_VETOES_2-GPSSTART-GPSEND.hdf ${path|path_full_data}H1L1-COINC_FULL_DATA_FULL_VETOES_3-GPSSTART-GPSEND.hdf ${path|path_full_data}H1L1-COINC_FULL_DATA_FULL_VETOES_4-GPSSTART-GPSEND.hdf ${path|path_full_data}H1L1-COINC_FULL_DATA_FULL_VETOES_5-GPSSTART-GPSEND.hdf ${path|path_full_data}H1L1-COINC_FULL_DATA_FULL_VETOES_6-GPSSTART-GPSEND.hdf ${path|path_full_data}H1L1-COINC_FULL_DATA_FULL_VETOES_7-GPSSTART-GPSEND.hdf ${path|path_full_data}H1L1-COINC_FULL_DATA_FULL_VETOES_8-GPSSTART-GPSEND.hdf ${path|path_full_data}H1L1-COINC_FULL_DATA_FULL_VETOES_9-GPSSTART-GPSEND.hdf ${path|path_full_data}H1L1-COINC_FULL_DATA_FULL_VETOES_10-GPSSTART-GPSEND.hdf ${path|path_full_data}H1L1-COINC_FULL_DATA_FULL_VETOES_11-GPSSTART-GPSEND.hdf ${path|path_full_data}H1L1-COINC_FULL_DATA_FULL_VETOES_12-GPSSTART-GPSEND.hdf ${path|path_full_data}H1L1-COINC_FULL_DATA_FULL_VETOES_13-GPSSTART-GPSEND.hdf ${path|path_full_data}H1L1-COINC_FULL_DATA_FULL_VETOES_14-GPSSTART-GPSEND.hdf ${path|path_full_data}H1L1-COINC_FULL_DATA_FULL_VETOES_15-GPSSTART-GPSEND.hdf ${path|path_full_data}H1L1-COINC_FULL_DATA_FULL_VETOES_16-GPSSTART-GPSEND.hdf ${path|path_full_data}H1L1-COINC_FULL_DATA_FULL_VETOES_17-GPSSTART-GPSEND.hdf ${path|path_full_data}H1L1-COINC_FULL_DATA_FULL_VETOES_18-GPSSTART-GPSEND.hdf ${path|path_full_data}H1L1-COINC_FULL_DATA_FULL_VETOES_19-GPSSTART-GPSEND.hdf ${path|path_full_data}H1L1-COINC_FULL_DATA_FULL_VETOES_20-GPSSTART-GPSEND.hdf ${path|path_full_data}H1L1-COINC_FULL_DATA_FULL_VETOES_21-GPSSTART-GPSEND.hdf ${path|path_full_data}H1L1-COINC_FULL_DATA_FULL_VETOES_22-GPSSTART-GPSEND.hdf ${path|path_full_data}H1L1-COINC_FULL_DATA_FULL_VETOES_23-GPSSTART-GPSEND.hdf ${path|path_full_data}H1L1-COINC_FULL_DATA_FULL_VETOES_24-GPSSTART-GPSEND.hdf ${path|path_full_data}H1L1-COINC_FULL_DATA_FULL_VETOES_25-GPSSTART-GPSEND.hdf ${path|path_full_data}H1L1-COINC_FULL_DATA_FULL_VETOES_26-GPSSTART-GPSEND.hdf ${path|path_full_data}H1L1-COINC_FULL_DATA_FULL_VETOES_27-GPSSTART-GPSEND.hdf ${path|path_full_data}H1L1-COINC_FULL_DATA_FULL_VETOES_28-GPSSTART-GPSEND.hdf ${path|path_full_data}H1L1-COINC_FULL_DATA_FULL_VETOES_29-GPSSTART-GPSEND.hdf ${path|path_full_data}H1L1-COINC_FULL_DATA_FULL_VETOES_30-GPSSTART-GPSEND.hdf ${path|path_full_data}H1L1-COINC_FULL_DATA_FULL_VETOES_31-GPSSTART-GPSEND.hdf ${path|path_full_data}H1L1-COINC_FULL_DATA_FULL_VETOES_32-GPSSTART-GPSEND.hdf ${path|path_full_data}H1L1-COINC_FULL_DATA_FULL_VETOES_33-GPSSTART-GPSEND.hdf ${path|path_full_data}H1L1-COINC_FULL_DATA_FULL_VETOES_34-GPSSTART-GPSEND.hdf ${path|path_full_data}H1L1-COINC_FULL_DATA_FULL_VETOES_35-GPSSTART-GPSEND.hdf ${path|path_full_data}H1L1-COINC_FULL_DATA_FULL_VETOES_36-GPSSTART-GPSEND.hdf ${path|path_full_data}H1L1-COINC_FULL_DATA_FULL_VETOES_37-GPSSTART-GPSEND.hdf ${path|path_full_data}H1L1-COINC_FULL_DATA_FULL_VETOES_38-GPSSTART-GPSEND.hdf ${path|path_full_data}H1L1-COINC_FULL_DATA_FULL_VETOES_39-GPSSTART-GPSEND.hdf

; inj-inj
stage1-BNSINJINJ-trigger-files = ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_INJINJ_JOB0-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_INJINJ_JOB1-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_INJINJ_JOB2-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_INJINJ_JOB3-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_INJINJ_JOB4-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_INJINJ_JOB5-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_INJINJ_JOB6-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_INJINJ_JOB7-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_INJINJ_JOB8-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_INJINJ_JOB9-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_INJINJ_JOB10-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_INJINJ_JOB11-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_INJINJ_JOB12-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_INJINJ_JOB13-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_INJINJ_JOB14-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_INJINJ_JOB15-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_INJINJ_JOB16-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_INJINJ_JOB17-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_INJINJ_JOB18-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_INJINJ_JOB19-GPSSTART-GPSEND.hdf 

stage1-BBHINJINJ-trigger-files = ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_INJINJ_JOB0-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_INJINJ_JOB1-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_INJINJ_JOB2-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_INJINJ_JOB3-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_INJINJ_JOB4-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_INJINJ_JOB5-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_INJINJ_JOB6-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_INJINJ_JOB7-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_INJINJ_JOB8-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_INJINJ_JOB9-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_INJINJ_JOB10-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_INJINJ_JOB11-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_INJINJ_JOB12-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_INJINJ_JOB13-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_INJINJ_JOB14-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_INJINJ_JOB15-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_INJINJ_JOB16-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_INJINJ_JOB17-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_INJINJ_JOB18-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_INJINJ_JOB19-GPSSTART-GPSEND.hdf 

stage1-NSBHINJINJ-trigger-files = ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_INJINJ_JOB0-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_INJINJ_JOB1-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_INJINJ_JOB2-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_INJINJ_JOB3-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_INJINJ_JOB4-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_INJINJ_JOB5-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_INJINJ_JOB6-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_INJINJ_JOB7-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_INJINJ_JOB8-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_INJINJ_JOB9-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_INJINJ_JOB10-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_INJINJ_JOB11-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_INJINJ_JOB12-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_INJINJ_JOB13-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_INJINJ_JOB14-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_INJINJ_JOB15-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_INJINJ_JOB16-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_INJINJ_JOB17-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_INJINJ_JOB18-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_INJINJ_JOB19-GPSSTART-GPSEND.hdf 

; inj-full
stage1-BNSINJFULL-trigger-files = ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_INJFULL_JOB0-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_INJFULL_JOB1-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_INJFULL_JOB2-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_INJFULL_JOB3-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_INJFULL_JOB4-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_INJFULL_JOB5-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_INJFULL_JOB6-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_INJFULL_JOB7-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_INJFULL_JOB8-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_INJFULL_JOB9-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_INJFULL_JOB10-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_INJFULL_JOB11-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_INJFULL_JOB12-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_INJFULL_JOB13-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_INJFULL_JOB14-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_INJFULL_JOB15-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_INJFULL_JOB16-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_INJFULL_JOB17-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_INJFULL_JOB18-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_INJFULL_JOB19-GPSSTART-GPSEND.hdf 

stage1-BBHINJFULL-trigger-files = ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_INJFULL_JOB0-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_INJFULL_JOB1-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_INJFULL_JOB2-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_INJFULL_JOB3-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_INJFULL_JOB4-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_INJFULL_JOB5-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_INJFULL_JOB6-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_INJFULL_JOB7-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_INJFULL_JOB8-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_INJFULL_JOB9-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_INJFULL_JOB10-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_INJFULL_JOB11-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_INJFULL_JOB12-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_INJFULL_JOB13-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_INJFULL_JOB14-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_INJFULL_JOB15-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_INJFULL_JOB16-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_INJFULL_JOB17-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_INJFULL_JOB18-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_INJFULL_JOB19-GPSSTART-GPSEND.hdf 

stage1-NSBHINJFULL-trigger-files = ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_INJFULL_JOB0-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_INJFULL_JOB1-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_INJFULL_JOB2-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_INJFULL_JOB3-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_INJFULL_JOB4-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_INJFULL_JOB5-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_INJFULL_JOB6-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_INJFULL_JOB7-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_INJFULL_JOB8-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_INJFULL_JOB9-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_INJFULL_JOB10-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_INJFULL_JOB11-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_INJFULL_JOB12-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_INJFULL_JOB13-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_INJFULL_JOB14-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_INJFULL_JOB15-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_INJFULL_JOB16-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_INJFULL_JOB17-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_INJFULL_JOB18-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_INJFULL_JOB19-GPSSTART-GPSEND.hdf 

;FULLINJ
stage1-BNSFULLINJ-trigger-files = ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_FULLINJ_JOB0-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_FULLINJ_JOB1-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_FULLINJ_JOB2-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_FULLINJ_JOB3-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_FULLINJ_JOB4-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_FULLINJ_JOB5-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_FULLINJ_JOB6-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_FULLINJ_JOB7-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_FULLINJ_JOB8-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_FULLINJ_JOB9-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_FULLINJ_JOB10-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_FULLINJ_JOB11-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_FULLINJ_JOB12-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_FULLINJ_JOB13-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_FULLINJ_JOB14-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_FULLINJ_JOB15-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_FULLINJ_JOB16-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_FULLINJ_JOB17-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_FULLINJ_JOB18-GPSSTART-GPSEND.hdf ${path|path_BNSINJ}H1L1-COINC_BNSSTT2_INJ_INJ_FULLINJ_JOB19-GPSSTART-GPSEND.hdf 

stage1-BBHFULLINJ-trigger-files = ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_FULLINJ_JOB0-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_FULLINJ_JOB1-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_FULLINJ_JOB2-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_FULLINJ_JOB3-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_FULLINJ_JOB4-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_FULLINJ_JOB5-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_FULLINJ_JOB6-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_FULLINJ_JOB7-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_FULLINJ_JOB8-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_FULLINJ_JOB9-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_FULLINJ_JOB10-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_FULLINJ_JOB11-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_FULLINJ_JOB12-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_FULLINJ_JOB13-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_FULLINJ_JOB14-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_FULLINJ_JOB15-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_FULLINJ_JOB16-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_FULLINJ_JOB17-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_FULLINJ_JOB18-GPSSTART-GPSEND.hdf ${path|path_BBHINJ}H1L1-COINC_BBHSEOBNRV4_INJ_INJ_FULLINJ_JOB19-GPSSTART-GPSEND.hdf 

stage1-NSBHFULLINJ-trigger-files = ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_FULLINJ_JOB0-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_FULLINJ_JOB1-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_FULLINJ_JOB2-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_FULLINJ_JOB3-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_FULLINJ_JOB4-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_FULLINJ_JOB5-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_FULLINJ_JOB6-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_FULLINJ_JOB7-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_FULLINJ_JOB8-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_FULLINJ_JOB9-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_FULLINJ_JOB10-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_FULLINJ_JOB11-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_FULLINJ_JOB12-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_FULLINJ_JOB13-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_FULLINJ_JOB14-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_FULLINJ_JOB15-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_FULLINJ_JOB16-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_FULLINJ_JOB17-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_FULLINJ_JOB18-GPSSTART-GPSEND.hdf ${path|path_NSBHINJ}H1L1-COINC_NSBHSEOBNRV4_INJ_INJ_FULLINJ_JOB19-GPSSTART-GPSEND.hdf 


[inspiral]
; parameters for matched filtering

; amount of buffer data for letting filters settle
pad-data = 8

; conditioning high-pass filter
strain-high-pass = 15

; working sample rate for matched filtering
sample-rate = 2048

; segmentation of the data
; start-pad must be long enough to contain a full BNS signal
segment-length = 512
segment-start-pad = 144
segment-end-pad = 16
; turn on zero-padding
allow-zero-padding =
; Taper the first and last second of data read in for zero padding
taper-data = 1

; estimation of the noise PSD and construction of the whitening filter
psd-estimation = median
psd-segment-length = 16
psd-segment-stride = 8
psd-inverse-length = 16
; 512s PSD length given by:
; 512s = psd-segment-length + (psd-num-segments - 1) * psd-segment-stride
psd-num-segments = 63

;psdvar-segment = 8
;psdvar-short-segment = 0.25
;psdvar-long-segment = 512
;psdvar-psd-duration = 8
;psdvar-psd-stride = 4
;psdvar-low-freq = 20
;psdvar-high-freq = 480

; Autogating options
autogating-threshold = 50
autogating-cluster = 0.1
autogating-width = 0.25
autogating-taper = 0.25
autogating-pad = 16
autogating-max-iterations = 5

; starting frequency of matched filter integration
; low-frequency-cutoff is set to the minimum variable frequency in the bank,
; rounded down
enable-bank-start-frequency =
low-frequency-cutoff = 20

; template approximant
; switch to SEOBNRv4 templates as soon as we can (M >= 4)
approximant = 'SPAtmplt:mtotal<4' 'SEOBNRv4_ROM:else'
order = -1

; threshold for generating triggers
snr-threshold = 4.0
keep-loudest-interval = 1.072
keep-loudest-num = 100
keep-loudest-stat = newsnr_sgveto

; method for clustering triggers over time
cluster-method = window
cluster-window = 0.5
cluster-function = symmetric

; signal-based vetoes
chisq-snr-threshold = 5.25
chisq-bins = "0.72*get_freq('fSEOBNRv4Peak',params.mass1,params.mass2,params.spin1z,params.spin2z)**0.7"
newsnr-threshold = 4.0

; sine-Gaussian chisq
sgchisq-snr-threshold = 6.0
sgchisq-locations = "mtotal>30:20-15,20-30,20-45,20-60,20-75,20-90,20-105,20-120"

; options for reducing the computational cost and storage
finalize-events-template-rate = 500
filter-inj-only =
injection-window = 4.5
processing-scheme = mkl

hierarchical-stat-threshold = 7.0

connection-file = /home/albert.einstein/search/banks/connection_coarse_to_flat.hdf

coarse-bank-file = /home/albert.einstein/search/banks/coarsebank.hdf

fine-bank-file = ${workflow-tmpltbank|tmpltbank-pregenerated-bank}

[inspiral-fulldata]
coarse-trigger-files = ${path|stage1-full-data-trigger-files} 

[inspiral-bnsinj]
coarse-trigger-files = ${path|stage1-BNSINJINJ-trigger-files} ${path|stage1-BNSINJFULL-trigger-files} ${path|stage1-BNSFULLINJ-trigger-files}


[inspiral-bbhinj]
coarse-trigger-files = ${path|stage1-BBHINJINJ-trigger-files} ${path|stage1-BBHINJFULL-trigger-files} ${path|stage1-BBHFULLINJ-trigger-files}

[inspiral-nsbhinj]
coarse-trigger-files = ${path|stage1-NSBHINJINJ-trigger-files} ${path|stage1-NSBHINJFULL-trigger-files} ${path|stage1-NSBHFULLINJ-trigger-files}


[inspiral-h1]
; Hanford specific matched-filter parameters
channel-name = ${workflow|h1-channel-name}

[inspiral-l1]
; Livingston specific matched-filter parameters
channel-name = ${workflow|l1-channel-name}


[calculate_psd]
cores = 6
low-frequency-cutoff = ${inspiral|low-frequency-cutoff}
pad-data = ${inspiral|pad-data}
strain-high-pass = ${inspiral|strain-high-pass}
sample-rate = ${inspiral|sample-rate}
segment-length = ${inspiral|segment-length}
segment-start-pad = ${inspiral|segment-start-pad}
segment-end-pad = ${inspiral|segment-end-pad}
psd-estimation = ${inspiral|psd-estimation}
psd-segment-length = ${inspiral|psd-segment-length}
psd-segment-stride = ${inspiral|psd-segment-stride}
psd-num-segments = ${inspiral|psd-num-segments}
taper-data = ${inspiral|taper-data}
autogating-threshold = ${inspiral|autogating-threshold}
autogating-cluster = ${inspiral|autogating-cluster}
autogating-width = ${inspiral|autogating-width}
autogating-taper = ${inspiral|autogating-taper}
autogating-pad = ${inspiral|autogating-pad}

[merge_psds]

[calculate_psd-h1]
channel-name = ${workflow|h1-channel-name}

[calculate_psd-l1]
channel-name = ${workflow|l1-channel-name}


[hdf_trigger_merge]

[bank2hdf]

[fit_by_template]
fit-function = exponential
sngl-stat = newsnr_sgveto
stat-threshold = 6.
prune-param = mtotal
log-prune-param =
prune-bins = 2
prune-number = 2

[fit_over_param]
fit-param = template_duration chi_eff eta
; f_low required to calculate template duration to smooth the fit over
f-lower = ${inspiral|low-frequency-cutoff}
connection-file = ${inspiral|connection-file}
coarse-bank-file = ${inspiral|coarse-bank-file}
prune-bins = 2
prune-number = 2
fit-function = exponential
sngl-stat = newsnr_sgveto
stat-threshold = 6.
prune-param = mtotal
log-prune-param =

[fit_over_param_combine]

;[distribute_background_bins]

[coinc]
; additional time (in seconds) to add to light-travel time to construct time coincidence window
coinc-threshold = 0.002
strict-coinc-time =
ranking-statistic = phasetd_exp_fit_stat_sgveto


; Parameters to reproduce this file available at
; https://git.ligo.org/ligo-cbc/pycbc-software/blob/c2fc41b3c32dbaa2fe859b0d5929b050c01c2b91/statistic-files/v1/make_h1l1_phase_time_amp_v1.sh
statistic-files = /home/albert.einstein/search/statistic/H1L1-PHASE_TIME_AMP_v1.hdf


[coinc-full]
; time-slide interval in seconds
timeslide-interval = 0.1
; reduction factors for storing decimated time slide events
loudest-keep-values = 9:10 8.5:30 8:30 7.5:30

[coinc-fullinj&coinc-injfull]
; perform little-dog analysis for software injections
timeslide-interval = ${coinc-full|timeslide-interval}
cluster-window = ${statmap|cluster-window}
; keep only coincs with a stat above specified value in injection little-dog analysis
loudest-keep-values = 8.5:9999999999999

[statmap]
max-hierarchical-removal = ${workflow-results|max-hierarchical-removal}
hierarchical-removal-against = exclusive

[statmap&statmap_inj]
; time window (in seconds) used to remove triggers around zero-lag coincidences
veto-window = 0.100
; cluster each slide separately over a 10 second window
cluster-window = 10.0

[combine_statmap]
cluster-window = ${statmap|cluster-window}

[foreground_censor]

[hdfinjfind]
; time in seconds within which a trigger must fall to be associated with an injection
injection-window = 2.0
optimal-snr-column = H1:alpha1 L1:alpha2
